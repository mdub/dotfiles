#!/usr/bin/osascript -l JavaScript

ObjC.import('AppKit');

function run() {
    const data = $.NSFileHandle.fileHandleWithStandardInput.readDataToEndOfFile;
    const html = $.NSString.alloc.initWithDataEncoding(data, $.NSUTF8StringEncoding);
    const pb = $.NSPasteboard.generalPasteboard;
    
    pb.clearContents;
    pb.declareTypesOwner($.NSArray.arrayWithArray(['public.html', 'public.utf8-plain-text']), null);
    pb.setDataForType(html.dataUsingEncoding($.NSUTF8StringEncoding), 'public.html');
    pb.setStringForType(html, 'public.utf8-plain-text');
    
    return true;
}